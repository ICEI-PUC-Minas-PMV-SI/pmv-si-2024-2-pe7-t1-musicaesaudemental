<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Música e Saúde Mental</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="container">
        <h1 class="title">Música e Saúde Mental - Previsão do status de melhora da saúde do usuário</h1>
        <p class="description">Previsão baseada em modelos preditivos treinados. Preencha os campos abaixo e descubra se os estilos musicais que você mais escuta irão te ajudar na sua saúde mental.</p>

        <div class="content">
            <!-- Informação sobre categorias -->
            <div class="info-box">
                <h3>Informações sobre categorias</h3>
                <p>Preencha os campos com os valores de frequência que representam quanto você escuta cada estilo musical. Além disso, inclua as informações relacionadas à sua idade e os níveis de sintomas.</p>
            </div>

            <!-- Formulário -->
            <form class="form" method="POST" action="/prever" id="musicForm">
                <p>Atribua uma nota, 0 (nunca), 1 (raramente), 2 (às vezes) a 3 (com frequência) para a frequência de cada estilo musical abaixo.</p>

                <label for="classical">Classical Frequency:</label>
                <select id="Classical_frequency" name="Classical_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <label for="country">Country Frequency:</label>
                <select id="Country_frequency" name="Country_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <label for="edm">EDM Frequency:</label>
                <select id="EDM_frequency" name="EDM_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <label for="folk">Folk Frequency:</label>
                <select id="Folk_frequency" name="Folk_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <label for="gospel">Gospel Frequency:</label>
                <select id="Gospel_frequency" name="Gospel_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <label for="hiphop">Hip-hop Frequency:</label>
                <select id="Hip hop_frequency" name="Hip hop_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <label for="jazz">Jazz Frequency:</label>
                <select id="Jazz_frequency" name="Jazz_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>
                
                <label for="kpop">K-pop Frequency:</label>
                <select id="K pop_frequency" name="K pop_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <label for="latin">Latin Frequency:</label>
                <select id="Latin_frequency" name="Latin_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <label for="lofi">Lofi Frequency:</label>
                <select id="Lofi_frequency" name="Lofi_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <label for="metal">Metal Frequency:</label>
                <select id="Metal_frequency" name="Metal_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <label for="pop">Pop Frequency:</label>
                <select id="Pop_frequency" name="Pop_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <label for="rb">R&B Frequency:</label>
                <select id="R&B_frequency" name="R&B_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <label for="rap">Rap Frequency:</label>
                <select id="Rap_frequency" name="Rap_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <label for="rock">Rock Frequency:</label>
                <select id="Rock_frequency" name="Rock_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <label for="videogame">Video Game Music Frequency:</label>
                <select id="Video game music_frequency" name="Video game music_frequency" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>

                <!-- Repetir os demais estilos musicais aqui com o mesmo padrão -->

                <p>Atribua uma nota para nível que você se autorelata ter dos transtornos abaixo de 0 a 10.</p>

                <label for="anxiety">Anxiety Level:</label>
                <select id="Anxiety" name="Anxiety" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>

                <label for="depression">Depression Level:</label>
                <select id="Depression" name="Depression" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>

                <label for="insomnia">Insomnia Level:</label>
                <select id="Insomnia" name="Insomnia" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>

                <label for="ocd">OCD Level:</label>
                <select id="OCD" name="OCD" required>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>

                <!-- Repetir os demais transtornos aqui com o mesmo padrão -->

                <p>Informe sua idade.</p>

                <label for="age">Age:</label>
                <input type="number" id="Age" name="Age" required placeholder="Ex: 13">

                <button type="submit">Enviar</button>
            </form>

            <!-- Previsão 
            <div class="prediction-box">
                <h3>Previsão</h3>
                <p>O resultado será exibido aqui após o envio do formulário.</p>
            </div>
        </div>
    </div> -->
            <div class="prediction-box" id="predictionBox">
                <h3>Previsão</h3>
                <p id="result">O resultado será exibido aqui após o envio do formulário.</p>
            </div>
        <script>
            document.getElementById('musicForm').addEventListener('submit', async function (event) {
            event.preventDefault(); // Evita o comportamento padrão do formulário

            // Captura os dados do formulário
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData.entries());

            const apiUrl = 'https://pmv-si-2024-2-pe7-t1-musicaesaudemental.onrender.com/predict-all';

            $.ajax({
                url: apiUrl,
                method: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(data),
                success: function (response) {
                    console.log('Enviado com sucesso:', response);
                    alert('Enviado com sucesso!');
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    console.error('Erro ao enviar:', textStatus, errorThrown);
                    alert('Erro ao enviar: ' + textStatus);
                }
            });
        });              
      </script>
</body>
</html>


